<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>University of Cambridge - Retinal Mosaics | Frictionless Data</title>
    <meta name="description" content="Investigating the applicability of the Data Package concept to facilitate data reuse in the field of Computational Neuroscience.">
    <script src="https://unpkg.com/honeycomb-grid@3.1.3"></script>
  <script src="https://unpkg.com/svg.js@2.7.1"></script>
    
    <link rel="preload" href="/assets/css/0.styles.7dd213d5.css" as="style"><link rel="preload" href="/assets/js/app.8683ac4c.js" as="script"><link rel="preload" href="/assets/js/6.6b553f36.js" as="script"><link rel="preload" href="/assets/js/2.d1974d30.js" as="script"><link rel="preload" href="/assets/js/34.737e503d.js" as="script"><link rel="prefetch" href="/assets/js/10.38e3c208.js"><link rel="prefetch" href="/assets/js/11.d3ceaee2.js"><link rel="prefetch" href="/assets/js/12.6bf26d07.js"><link rel="prefetch" href="/assets/js/13.6746fee1.js"><link rel="prefetch" href="/assets/js/14.5a59d1ab.js"><link rel="prefetch" href="/assets/js/15.49ef2e51.js"><link rel="prefetch" href="/assets/js/16.a610bccb.js"><link rel="prefetch" href="/assets/js/17.119a4c7c.js"><link rel="prefetch" href="/assets/js/18.f6ac6183.js"><link rel="prefetch" href="/assets/js/19.d470a15d.js"><link rel="prefetch" href="/assets/js/20.267ca561.js"><link rel="prefetch" href="/assets/js/21.9687ff90.js"><link rel="prefetch" href="/assets/js/22.3e0f5bff.js"><link rel="prefetch" href="/assets/js/23.3282425b.js"><link rel="prefetch" href="/assets/js/24.02624bad.js"><link rel="prefetch" href="/assets/js/25.6e8cd982.js"><link rel="prefetch" href="/assets/js/26.3b3e2057.js"><link rel="prefetch" href="/assets/js/27.8479d316.js"><link rel="prefetch" href="/assets/js/28.3ae7ecce.js"><link rel="prefetch" href="/assets/js/29.b032cff4.js"><link rel="prefetch" href="/assets/js/3.a93e643b.js"><link rel="prefetch" href="/assets/js/30.f4835a6a.js"><link rel="prefetch" href="/assets/js/31.85cc09bf.js"><link rel="prefetch" href="/assets/js/32.3cd76e49.js"><link rel="prefetch" href="/assets/js/33.679f1cc6.js"><link rel="prefetch" href="/assets/js/35.8b39c601.js"><link rel="prefetch" href="/assets/js/36.f773ef4d.js"><link rel="prefetch" href="/assets/js/37.bbba5795.js"><link rel="prefetch" href="/assets/js/38.3deec83d.js"><link rel="prefetch" href="/assets/js/39.b23957b5.js"><link rel="prefetch" href="/assets/js/4.bb95f045.js"><link rel="prefetch" href="/assets/js/40.ec68fd75.js"><link rel="prefetch" href="/assets/js/41.dbdee0c9.js"><link rel="prefetch" href="/assets/js/42.7750463e.js"><link rel="prefetch" href="/assets/js/43.f40efdb2.js"><link rel="prefetch" href="/assets/js/44.3c272495.js"><link rel="prefetch" href="/assets/js/45.8ef344b2.js"><link rel="prefetch" href="/assets/js/46.5a31e9eb.js"><link rel="prefetch" href="/assets/js/47.a7238101.js"><link rel="prefetch" href="/assets/js/48.910661cb.js"><link rel="prefetch" href="/assets/js/49.5018def7.js"><link rel="prefetch" href="/assets/js/5.a9280237.js"><link rel="prefetch" href="/assets/js/50.d827674c.js"><link rel="prefetch" href="/assets/js/51.23cb5995.js"><link rel="prefetch" href="/assets/js/52.a31f6ace.js"><link rel="prefetch" href="/assets/js/53.04bffaf5.js"><link rel="prefetch" href="/assets/js/54.adecbe4b.js"><link rel="prefetch" href="/assets/js/55.47f61434.js"><link rel="prefetch" href="/assets/js/56.195bdc6d.js"><link rel="prefetch" href="/assets/js/57.a62f3733.js"><link rel="prefetch" href="/assets/js/58.a5195a90.js"><link rel="prefetch" href="/assets/js/59.0b9dfdd6.js"><link rel="prefetch" href="/assets/js/60.ac4e3c13.js"><link rel="prefetch" href="/assets/js/61.998ff74f.js"><link rel="prefetch" href="/assets/js/62.7f738fde.js"><link rel="prefetch" href="/assets/js/63.b70382df.js"><link rel="prefetch" href="/assets/js/64.e3c3c4de.js"><link rel="prefetch" href="/assets/js/65.51ba912d.js"><link rel="prefetch" href="/assets/js/66.ce103ce7.js"><link rel="prefetch" href="/assets/js/67.e598c5dd.js"><link rel="prefetch" href="/assets/js/68.4c279a01.js"><link rel="prefetch" href="/assets/js/69.41a32dd1.js"><link rel="prefetch" href="/assets/js/7.9ad333a9.js"><link rel="prefetch" href="/assets/js/70.1fb5c766.js"><link rel="prefetch" href="/assets/js/71.ff8a1b19.js"><link rel="prefetch" href="/assets/js/72.8bde65a3.js"><link rel="prefetch" href="/assets/js/73.d0b7152c.js"><link rel="prefetch" href="/assets/js/74.a0b26d28.js"><link rel="prefetch" href="/assets/js/75.ba435b37.js"><link rel="prefetch" href="/assets/js/76.a9708a3a.js"><link rel="prefetch" href="/assets/js/77.7d7a41e0.js"><link rel="prefetch" href="/assets/js/78.5d80d707.js"><link rel="prefetch" href="/assets/js/79.ceee8ea3.js"><link rel="prefetch" href="/assets/js/8.428f6b5a.js"><link rel="prefetch" href="/assets/js/80.356a4a99.js"><link rel="prefetch" href="/assets/js/81.e450c5f1.js"><link rel="prefetch" href="/assets/js/82.47a5baf2.js"><link rel="prefetch" href="/assets/js/83.9e14148e.js"><link rel="prefetch" href="/assets/js/84.2df38a6d.js"><link rel="prefetch" href="/assets/js/85.c2ff1e22.js"><link rel="prefetch" href="/assets/js/86.3fe4e5e6.js"><link rel="prefetch" href="/assets/js/87.8dfcb9dc.js"><link rel="prefetch" href="/assets/js/88.09e9bf2c.js"><link rel="prefetch" href="/assets/js/89.8a24edac.js"><link rel="prefetch" href="/assets/js/9.5f34e22e.js"><link rel="prefetch" href="/assets/js/90.62846104.js"><link rel="prefetch" href="/assets/js/91.bbef675c.js"><link rel="prefetch" href="/assets/js/92.bd7970a1.js"><link rel="prefetch" href="/assets/js/93.0561d3fd.js"><link rel="prefetch" href="/assets/js/94.561a3a0f.js"><link rel="prefetch" href="/assets/js/95.b0ce88da.js"><link rel="prefetch" href="/assets/js/96.373ab984.js"><link rel="prefetch" href="/assets/js/97.34917fa7.js"><link rel="prefetch" href="/assets/js/98.221efc57.js">
    <link rel="stylesheet" href="/assets/css/0.styles.7dd213d5.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container Post"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/frictionless-data-blue-logo-text.png" alt="Frictionless Data" class="logo"> <span class="site-name can-hide">Frictionless Data</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/about/" class="nav-link">About</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Products" class="dropdown-title"><span class="title">Products</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/products/data-package/" class="nav-link">Data Package</a></li><li class="dropdown-item"><!----> <a href="/products/table-schema/" class="nav-link">Table Schema</a></li><li class="dropdown-item"><!----> <a href="/products/tabulator/" class="nav-link">Tabulator</a></li><li class="dropdown-item"><!----> <a href="/products/goodtables/" class="nav-link">GoodTables</a></li><li class="dropdown-item"><!----> <a href="/products/data-package-pipelines/" class="nav-link">Data Package Pipelines</a></li><li class="dropdown-item"><!----> <a href="/products/datahub/" class="nav-link">DataHub</a></li><li class="dropdown-item"><h4></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/products/labs/" class="nav-link">Labs</a></li></ul></li></ul></div></div><div class="nav-item"><a href="http://specs.frictionlessdata.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Specifications
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="/contribute/" class="nav-link">Contribute</a></div><div class="nav-item"><a href="/team/" class="nav-link">Team</a></div><div class="nav-item"><a href="/blog/" class="nav-link router-link-active">Blog</a></div> <a href="https://github.com/frictionlessdata" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/about/" class="nav-link">About</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Products" class="dropdown-title"><span class="title">Products</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/products/data-package/" class="nav-link">Data Package</a></li><li class="dropdown-item"><!----> <a href="/products/table-schema/" class="nav-link">Table Schema</a></li><li class="dropdown-item"><!----> <a href="/products/tabulator/" class="nav-link">Tabulator</a></li><li class="dropdown-item"><!----> <a href="/products/goodtables/" class="nav-link">GoodTables</a></li><li class="dropdown-item"><!----> <a href="/products/data-package-pipelines/" class="nav-link">Data Package Pipelines</a></li><li class="dropdown-item"><!----> <a href="/products/datahub/" class="nav-link">DataHub</a></li><li class="dropdown-item"><h4></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/products/labs/" class="nav-link">Labs</a></li></ul></li></ul></div></div><div class="nav-item"><a href="http://specs.frictionlessdata.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Specifications
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="/contribute/" class="nav-link">Contribute</a></div><div class="nav-item"><a href="/team/" class="nav-link">Team</a></div><div class="nav-item"><a href="/blog/" class="nav-link router-link-active">Blog</a></div> <a href="https://github.com/frictionlessdata" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>University of Cambridge - Retinal Mosaics</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/2017/08/15/university-of-cambridge/#context" class="sidebar-link">Context</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/2017/08/15/university-of-cambridge/#problem-we-were-trying-to-solve" class="sidebar-link">Problem We Were Trying To Solve</a></li></ul></li><li><a href="/blog/2017/08/15/university-of-cambridge/#the-work" class="sidebar-link">The Work</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/2017/08/15/university-of-cambridge/#what-did-we-do" class="sidebar-link">What Did We Do</a></li></ul></li><li><a href="/blog/2017/08/15/university-of-cambridge/#review" class="sidebar-link">Review</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/2017/08/15/university-of-cambridge/#how-effective-was-it" class="sidebar-link">How Effective Was It</a></li></ul></li><li><a href="/blog/2017/08/15/university-of-cambridge/#next-steps" class="sidebar-link">Next Steps</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/2017/08/15/university-of-cambridge/#areas-for-future-work" class="sidebar-link">Areas for future work</a></li></ul></li><li><a href="/blog/2017/08/15/university-of-cambridge/#find-out-more" class="sidebar-link">Find Out More</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main aria-labelledby="main-title" class="page"><div class="theme-default-content"><header><h1 class="text-3xl pt-6">University of Cambridge - Retinal Mosaics</h1> <p class="text-xl pb-6"> </p> <time class="italic"> August 15, 2017 by Stephen Eglen (University of Cambridge), Dan Fowler (OKI) </time> <div class="pt-4 text-blue-500 pb-6"><img src="https://image.flaticon.com/icons/png/512/94/94699.png" class="w-4 h-4 inline text-lg"> </div></header> <div class="content__default"><h2 id="context"><a href="#context" class="header-anchor">#</a> Context</h2> <h3 id="problem-we-were-trying-to-solve"><a href="#problem-we-were-trying-to-solve" class="header-anchor">#</a> Problem We Were Trying To Solve</h3> <p>Stephen Eglen was looking to investigate the applicability of the Data Package concept to facilitate data reuse in the field of Computational Neuroscience. The following figure describes the kind of data he is collecting.  He was eventually seeking to get around 100–160 fields like this.<br>
Each circle is a cell drawn approximately to scale. The units of measurement are microns (micrometers).</p> <p><img src="/assets/img/camimage1.409b3ea6.png" alt="ADBio"></p> <p>The basic data are quite simple: two columns of numbers that describes the center of each circle where each circle represents a<br> <a href="https://en.wikipedia.org/wiki/Retinal_ganglion_cell" target="_blank" rel="noopener noreferrer">retinal ganglion cell<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.  The metadata that adds context to this data are as<br>
follows: the radius of each circle is 10um representing the average radius of this cell type; the dashed line represents the sample window which is the region of space within which the<br>
cells were sampled; the species from which the cells were sampled is a cat.</p> <p>The key question posed by the collection of such data in large quantities is “where to store all these metadata”.<br>
More formally, Stephen wanted a way to include the following metadata with sampled data:</p> <ol><li>Cell type: on center retinal ganglion cells</li> <li>Species: cat</li> <li>Radius of <a href="https://en.wikipedia.org/wiki/Soma_(biology)">soma</a>: 10 um</li> <li>Citation to original paper where data were presented: Wässle H, Boycott BB, Illing RB (1981) Morphology and mosaic of on- and off-beta cells in the cat retina and some functional considerations. Proc R Soc Lond B Biol Sci 212:177–195.</li> <li>Unit of measurement: micron.</li> <li>(Optionally) A raw image from where the data where taken. e.g. <a href="http://www.damtp.cam.ac.uk/user/sje30/data/mosaics/w81_scan/w81all.png" target="_blank" rel="noopener noreferrer">http://www.damtp.cam.ac.uk/user/sje30/data/mosaics/w81_scan/w81all.png<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ol> <p>The long-term goal was to build a website/repository containing about 100+ examples of these “retinal mosaics”. The website would allow people to view the mosaics, download the data files, or run online some simple analysis.</p> <h2 id="the-work"><a href="#the-work" class="header-anchor">#</a> The Work</h2> <h3 id="what-did-we-do"><a href="#what-did-we-do" class="header-anchor">#</a> What Did We Do</h3> <p>The Data Package specification is meant to be a container for data providing a consistent interface to tabular data.<br>
The Data Package specification outlines a number of different fields that can be stored within a descriptor file,  datapackage.json.<br>
For instance, for this example, we can assign a title to this Data Package by setting the field <code>title</code> to “Example Retinal Mosaic”:</p> <p><code>&quot;title&quot; : &quot;Example Retinal Mosaic&quot;</code></p> <p>We can also, for instance, set a <code>homepage</code> for the dataset which is a URL for the home on the web that is related to this Data Package.</p> <p><code>&quot;homepage&quot;: &quot;http://www.damtp.cam.ac.uk/user/sje30/data/mosaics/w81_scan/&quot;</code></p> <p>Some of the other metadata Stephen required do not, however, map well to existing specified fields in a Data Package.  For instance, as the Data Package is not specialized for storing biological data, there is no field for “species”.  (The Digital Curation Centre maintains a database of domain-specific metadata standards for biology and other fields.)  The specification is intended to be quite flexible in these circumstances:</p> <blockquote><p>Adherence to the specification does not imply that additional, non-specified properties cannot be used: a descriptor MAY include any number of properties in additional to those described as required and optional properties […] This flexibility enables specific communities to extend Data Packages as appropriate for the data they manage.</p></blockquote> <p>As an example, we stored the radius in a new field called <code>soma-radius</code> in the “root” level of the Data Package:</p> <p><code>&quot;soma-radius&quot;: 10</code></p> <p>While there are many different ways in which this particular element of metadata could have been stored, this was a good start that would allow easy iteration.  In storing this metadata in the datapackage.json, Data Package-aware tooling could read it with the data.</p> <p>For example, using the Data Package library (“datapkg”) written by ROpenSci, we can replace multiple calls to the data input functions (in this case, Stephen used the <code>read.table()</code> and <code>scan()</code> functions with a single call to <code>datapkg_read()</code> and store the result in a new object which combines both metadata and data called rmdp.</p> <div class="language-r extra-class"><pre class="language-r"><code><span class="token comment"># install_github(&quot;frictionlessdata/datapackage-r&quot;)</span>
library<span class="token punctuation">(</span>datapkg<span class="token punctuation">)</span>
rmdp <span class="token operator">&lt;-</span> datapkg_read<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># read soma radius from rmdp</span>
soma.rad <span class="token operator">=</span> rmdp<span class="token operator">$</span>`soma<span class="token operator">-</span>radius`

<span class="token comment"># read other metadata from the same object</span>
on <span class="token operator">&lt;-</span> rmdp<span class="token operator">$</span>data<span class="token operator">$</span>points
w <span class="token operator">&lt;-</span> rmdp<span class="token operator">$</span>data<span class="token operator">$</span>window

<span class="token comment"># plot</span>
plot<span class="token punctuation">(</span>on<span class="token punctuation">,</span> type<span class="token operator">=</span><span class="token string">'n'</span><span class="token punctuation">,</span> asp<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> bty<span class="token operator">=</span><span class="token string">'n'</span><span class="token punctuation">)</span>
symbols<span class="token punctuation">(</span>on<span class="token punctuation">,</span> circles<span class="token operator">=</span>rep<span class="token punctuation">(</span>soma.rad<span class="token punctuation">,</span> nrow<span class="token punctuation">(</span>on<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> add<span class="token operator">=</span><span class="token boolean">TRUE</span><span class="token punctuation">,</span>inch<span class="token operator">=</span><span class="token boolean">FALSE</span><span class="token punctuation">,</span> bg<span class="token operator">=</span><span class="token string">&quot;red&quot;</span><span class="token punctuation">)</span> rect<span class="token punctuation">(</span>w<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> w<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> w<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> w<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> lty<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span>
</code></pre></div><p>Below is the annotated datapackage.json with the metadata at the top followed by the resource information. As a start, we have included information on cell type, species, and units in the description, but we can easily create new fields to store these fields in a more structured way as we did with <code>soma-radius</code>:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;example-retinal-mosaic&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Example Retinal Mosaic&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;Homepage&quot;</span><span class="token operator">:</span> <span class="token string">&quot;http://www.damtp.cam.ac.uk/user/sje30/data/mosaics/w81_scan/&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;Image&quot;</span><span class="token operator">:</span> <span class="token string">&quot;http://www.damtp.cam.ac.uk/user/sje30/data/mosaics/w81_scan/w81all.png&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;This is an example retinal mosaic Data Package.&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;cell type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;on center&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;soma-radius&quot;</span><span class="token operator">:</span> <span class="token number">10</span>
<span class="token punctuation">}</span>
</code></pre></div><p>I’ve used a <code>sources</code> array with a single source object:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;sources&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
    <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Wässle H, Boycott BB, Illing RB (1981) Morphology and mosaic of on- and off-beta cells in the cat retina and some functional considerations. Proc R Soc Lond B Biol Sci 212:177–195.&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>The <code>resources</code> array in datapackage.json listed the files in the original datasets with <code>dialect</code> and <code>schema</code> information included. We named the first resource “points” with the filename set in <code>path</code>.  Because it is a space-delimited tabular file without a header, we needed to pass that information to the <code>dialect</code> attribute so that <code>datapkg_read()</code> can read the file. The <code>schema</code> attribute specifies the <code>type</code> of all the values in the table (e.g. “number”) as well as additional <code>constraints</code> on the value. Stephen noted that you can’t have an x coordinate without the y, so we have set <code>required</code> to true for both fields. In addition, Stephen noted that the “window” rectangle is a simple validation on the data, so I have translated the x and y bounds of the window to constraining conditions on each column. We do understand that assessing the validity of such data can be more complicated, however.</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;resources&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;points&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;path&quot;</span><span class="token operator">:</span> <span class="token string">&quot;w81s1on.txt&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;dialect&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;delimiter&quot;</span><span class="token operator">:</span> <span class="token string">&quot;\t&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;header&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token property">&quot;schema&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;fields&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;x&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;number&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;constraints&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token property">&quot;required&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
              <span class="token property">&quot;minimum&quot;</span><span class="token operator">:</span> <span class="token number">28.08</span><span class="token punctuation">,</span>
              <span class="token property">&quot;maximum&quot;</span><span class="token operator">:</span> <span class="token number">778.08</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;y&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;number&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;constraints&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token property">&quot;required&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
              <span class="token property">&quot;minimum&quot;</span><span class="token operator">:</span> <span class="token number">16.2</span><span class="token punctuation">,</span>
              <span class="token property">&quot;maximum&quot;</span><span class="token operator">:</span> <span class="token number">1007.02</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>For the completeness of the example, we have also added a resource for the “window” rectangle even though (a) we have already stored this data in the <code>constraints</code> key of the points matrix and (b) it is ideally stored as a vector not a data frame. The benefit of this method is the ability to load all the data files at once and reference them from a common datapackage.</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;window&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;path&quot;</span><span class="token operator">:</span> <span class="token string">&quot;w81s1w.txt&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;dialect&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;delimiter&quot;</span><span class="token operator">:</span> <span class="token string">&quot;\t&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;header&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;schema&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;fields&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
       <span class="token punctuation">{</span>
        <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;xmin&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;number&quot;</span>
       <span class="token punctuation">}</span><span class="token punctuation">,</span>
       <span class="token punctuation">{</span>
         <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;xmax&quot;</span><span class="token punctuation">,</span>
         <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;number&quot;</span>
       <span class="token punctuation">}</span><span class="token punctuation">,</span>
       <span class="token punctuation">{</span>
         <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ymin&quot;</span><span class="token punctuation">,</span>
         <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;number&quot;</span>
       <span class="token punctuation">}</span><span class="token punctuation">,</span>
       <span class="token punctuation">{</span>
         <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ymax&quot;</span><span class="token punctuation">,</span>
         <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;number&quot;</span>
       <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="review"><a href="#review" class="header-anchor">#</a> Review</h2> <h3 id="how-effective-was-it"><a href="#how-effective-was-it" class="header-anchor">#</a> How Effective Was It</h3> <p>The pilot tackled an interesting use case: providing a generic “home” for metadata related to an experiment,<br>
in a way that is clear and easy to read without the overhead of a more advanced, domain-specific specification.<br>
In a more complicated example, storing the metadata with the data for each sample—paired with a tool that could<br>
read this metadata—could provide an “object-oriented” style of working with experimental data.</p> <p>We have not tried this out on multiple samples (this is forthcoming), so we don’t have much information yet on<br>
the usefulness of this approach, but the exercise raised several important issues to potentially address with the<br>
Data Package format:</p> <ol><li>Stephen’s request for a specified location for storing units in a structured way comes up often: <a href="https://github.com/frictionlessdata/specs/issues/216" target="_blank" rel="noopener noreferrer">https://github.com/frictionlessdata/specs/issues/216<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li>More iterations, with more of a variety of data sources could help in trialling this</li> <li>Stephen wanted to store a non-tabular data file (an image) with the tabular datasets that comprise his datasets.  This is currently not allowed, but the subsequent definition of a Tabular Data Resource could pave the way for a method of specifying types of different resources and the kind of processing, validation or otherwise, that could be done with each.</li></ol> <h2 id="next-steps"><a href="#next-steps" class="header-anchor">#</a> Next Steps</h2> <h3 id="areas-for-future-work"><a href="#areas-for-future-work" class="header-anchor">#</a> Areas for future work</h3> <p>Stephen now has about 100 retinal mosaics that might make for a nice use case of the Data Package.<br>
In addition, The Frictionless Data Tool Fund has funded the development of the next version of the R Data Package.<br>
This will make some of the improvements brought to the Data Package specifications  in the past few months available in the R library.</p> <h2 id="find-out-more"><a href="#find-out-more" class="header-anchor">#</a> Find Out More</h2> <p><a href="https://github.com/frictionlessdata/pilot-retinal-mosaics" target="_blank" rel="noopener noreferrer">https://github.com/frictionlessdata/pilot-retinal-mosaics<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></div> <footer><a href="/blog/"> &lt; Go back</a></footer></div></main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.8683ac4c.js" defer></script><script src="/assets/js/6.6b553f36.js" defer></script><script src="/assets/js/2.d1974d30.js" defer></script><script src="/assets/js/34.737e503d.js" defer></script>
  </body>
</html>
