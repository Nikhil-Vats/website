<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>UK Data Service | Frictionless Data</title>
    <meta name="description" content="Bringing simplicity and gracefulness to the data experience">
    <script src="https://unpkg.com/honeycomb-grid@3.1.3"></script>
  <script src="https://unpkg.com/svg.js@2.7.1"></script>
    
    <link rel="preload" href="/assets/css/0.styles.f34a016d.css" as="style"><link rel="preload" href="/assets/js/app.00f08ef0.js" as="script"><link rel="preload" href="/assets/js/5.ffd5ee63.js" as="script"><link rel="preload" href="/assets/js/2.10065e94.js" as="script"><link rel="preload" href="/assets/js/10.e598e053.js" as="script"><link rel="prefetch" href="/assets/js/11.e584df3a.js"><link rel="prefetch" href="/assets/js/12.df1b62a0.js"><link rel="prefetch" href="/assets/js/13.01ead772.js"><link rel="prefetch" href="/assets/js/14.d51ad19e.js"><link rel="prefetch" href="/assets/js/15.24601fa1.js"><link rel="prefetch" href="/assets/js/16.a7fe74ed.js"><link rel="prefetch" href="/assets/js/17.a86136d2.js"><link rel="prefetch" href="/assets/js/18.d1f92e00.js"><link rel="prefetch" href="/assets/js/19.e4b8e7b7.js"><link rel="prefetch" href="/assets/js/20.8d75b38b.js"><link rel="prefetch" href="/assets/js/21.42018156.js"><link rel="prefetch" href="/assets/js/22.fc445b06.js"><link rel="prefetch" href="/assets/js/23.590b7761.js"><link rel="prefetch" href="/assets/js/24.010b0640.js"><link rel="prefetch" href="/assets/js/25.8b2e95f7.js"><link rel="prefetch" href="/assets/js/26.6b831a83.js"><link rel="prefetch" href="/assets/js/27.bc737f20.js"><link rel="prefetch" href="/assets/js/28.443abcc0.js"><link rel="prefetch" href="/assets/js/29.6602811e.js"><link rel="prefetch" href="/assets/js/3.850cc797.js"><link rel="prefetch" href="/assets/js/30.745199bb.js"><link rel="prefetch" href="/assets/js/31.a2b50787.js"><link rel="prefetch" href="/assets/js/32.218ca1a1.js"><link rel="prefetch" href="/assets/js/33.afbfa0cb.js"><link rel="prefetch" href="/assets/js/34.b4963e43.js"><link rel="prefetch" href="/assets/js/35.7d106510.js"><link rel="prefetch" href="/assets/js/36.45f1e2f4.js"><link rel="prefetch" href="/assets/js/37.ae7426bc.js"><link rel="prefetch" href="/assets/js/38.9286dcef.js"><link rel="prefetch" href="/assets/js/39.7bde7da4.js"><link rel="prefetch" href="/assets/js/4.3f156423.js"><link rel="prefetch" href="/assets/js/40.51ac75fd.js"><link rel="prefetch" href="/assets/js/41.90253e67.js"><link rel="prefetch" href="/assets/js/42.ecd79f8c.js"><link rel="prefetch" href="/assets/js/43.37891cce.js"><link rel="prefetch" href="/assets/js/44.bdea9308.js"><link rel="prefetch" href="/assets/js/45.4dd347d0.js"><link rel="prefetch" href="/assets/js/46.f4aca9b1.js"><link rel="prefetch" href="/assets/js/47.672009c4.js"><link rel="prefetch" href="/assets/js/48.fddd55a5.js"><link rel="prefetch" href="/assets/js/49.ec47c577.js"><link rel="prefetch" href="/assets/js/50.c82e5298.js"><link rel="prefetch" href="/assets/js/51.6a7ec26a.js"><link rel="prefetch" href="/assets/js/52.0e05e8d6.js"><link rel="prefetch" href="/assets/js/53.b106e413.js"><link rel="prefetch" href="/assets/js/54.f67641d4.js"><link rel="prefetch" href="/assets/js/55.4a15fb0f.js"><link rel="prefetch" href="/assets/js/56.d6fc28b4.js"><link rel="prefetch" href="/assets/js/57.48c50996.js"><link rel="prefetch" href="/assets/js/58.d86e3737.js"><link rel="prefetch" href="/assets/js/59.406019a4.js"><link rel="prefetch" href="/assets/js/6.8421ae6e.js"><link rel="prefetch" href="/assets/js/60.0a93a2f4.js"><link rel="prefetch" href="/assets/js/61.c1bc0e43.js"><link rel="prefetch" href="/assets/js/62.b29c0fad.js"><link rel="prefetch" href="/assets/js/63.cd350b92.js"><link rel="prefetch" href="/assets/js/64.afa380b8.js"><link rel="prefetch" href="/assets/js/65.c53bf7da.js"><link rel="prefetch" href="/assets/js/66.caeeb043.js"><link rel="prefetch" href="/assets/js/67.03ed2b19.js"><link rel="prefetch" href="/assets/js/68.98220c9d.js"><link rel="prefetch" href="/assets/js/69.f5f2898d.js"><link rel="prefetch" href="/assets/js/7.a3a87f22.js"><link rel="prefetch" href="/assets/js/70.045a5b3d.js"><link rel="prefetch" href="/assets/js/71.00de65f5.js"><link rel="prefetch" href="/assets/js/72.fe15b6ce.js"><link rel="prefetch" href="/assets/js/73.9c532869.js"><link rel="prefetch" href="/assets/js/74.2229e3e4.js"><link rel="prefetch" href="/assets/js/75.dbbc10ed.js"><link rel="prefetch" href="/assets/js/76.4a61184d.js"><link rel="prefetch" href="/assets/js/77.a334075a.js"><link rel="prefetch" href="/assets/js/78.798079f9.js"><link rel="prefetch" href="/assets/js/79.46a059d9.js"><link rel="prefetch" href="/assets/js/8.a84301f6.js"><link rel="prefetch" href="/assets/js/80.957a5bf1.js"><link rel="prefetch" href="/assets/js/81.04853374.js"><link rel="prefetch" href="/assets/js/82.f78bc5ee.js"><link rel="prefetch" href="/assets/js/83.2cbeab58.js"><link rel="prefetch" href="/assets/js/84.7ea7b9ce.js"><link rel="prefetch" href="/assets/js/85.1cd0574e.js"><link rel="prefetch" href="/assets/js/86.33685299.js"><link rel="prefetch" href="/assets/js/87.2b1574b5.js"><link rel="prefetch" href="/assets/js/88.f8ee1722.js"><link rel="prefetch" href="/assets/js/89.4bc96bb4.js"><link rel="prefetch" href="/assets/js/9.5fe7ae59.js"><link rel="prefetch" href="/assets/js/90.58bb0c03.js"><link rel="prefetch" href="/assets/js/91.e2b2af28.js"><link rel="prefetch" href="/assets/js/92.e63d7921.js"><link rel="prefetch" href="/assets/js/93.1353af86.js"><link rel="prefetch" href="/assets/js/94.9b4e4052.js"><link rel="prefetch" href="/assets/js/95.cdf21f99.js"><link rel="prefetch" href="/assets/js/96.5b7a96b9.js"><link rel="prefetch" href="/assets/js/97.fcf3668d.js"><link rel="prefetch" href="/assets/js/98.221efc57.js">
    <link rel="stylesheet" href="/assets/css/0.styles.f34a016d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container Post"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/frictionless-data-blue-logo-text.png" alt="Frictionless Data" class="logo"> <span class="site-name can-hide">Frictionless Data</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/about/" class="nav-link">About</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Products" class="dropdown-title"><span class="title">Products</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/products/data-package/" class="nav-link">Data Package</a></li><li class="dropdown-item"><!----> <a href="/products/table-schema/" class="nav-link">Table Schema</a></li><li class="dropdown-item"><!----> <a href="/products/tabulator/" class="nav-link">Tabulator</a></li><li class="dropdown-item"><!----> <a href="/products/goodtables/" class="nav-link">GoodTables</a></li><li class="dropdown-item"><!----> <a href="/products/data-package-pipelines/" class="nav-link">Data Package Pipelines</a></li><li class="dropdown-item"><!----> <a href="/products/datahub/" class="nav-link">DataHub</a></li><li class="dropdown-item"><h4></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/products/labs/" class="nav-link">Labs</a></li></ul></li></ul></div></div><div class="nav-item"><a href="http://specs.frictionlessdata.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Specifications
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="/contribute/" class="nav-link">Contribute</a></div><div class="nav-item"><a href="/blog/" class="nav-link router-link-active">Blog</a></div> <a href="https://github.com/frictionlessdata" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/about/" class="nav-link">About</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Products" class="dropdown-title"><span class="title">Products</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/products/data-package/" class="nav-link">Data Package</a></li><li class="dropdown-item"><!----> <a href="/products/table-schema/" class="nav-link">Table Schema</a></li><li class="dropdown-item"><!----> <a href="/products/tabulator/" class="nav-link">Tabulator</a></li><li class="dropdown-item"><!----> <a href="/products/goodtables/" class="nav-link">GoodTables</a></li><li class="dropdown-item"><!----> <a href="/products/data-package-pipelines/" class="nav-link">Data Package Pipelines</a></li><li class="dropdown-item"><!----> <a href="/products/datahub/" class="nav-link">DataHub</a></li><li class="dropdown-item"><h4></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/products/labs/" class="nav-link">Labs</a></li></ul></li></ul></div></div><div class="nav-item"><a href="http://specs.frictionlessdata.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Specifications
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="/contribute/" class="nav-link">Contribute</a></div><div class="nav-item"><a href="/blog/" class="nav-link router-link-active">Blog</a></div> <a href="https://github.com/frictionlessdata" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>UK Data Service</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/2017/12/12/ukds/#context" class="sidebar-link">Context</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/2017/12/12/ukds/#problem-we-were-trying-to-solve" class="sidebar-link">Problem We Were Trying To Solve</a></li><li class="sidebar-sub-header"><a href="/blog/2017/12/12/ukds/#the-work" class="sidebar-link">The Work</a></li><li class="sidebar-sub-header"><a href="/blog/2017/12/12/ukds/#review" class="sidebar-link">Review</a></li><li class="sidebar-sub-header"><a href="/blog/2017/12/12/ukds/#next-steps" class="sidebar-link">Next Steps</a></li><li class="sidebar-sub-header"><a href="/blog/2017/12/12/ukds/#additional-resources" class="sidebar-link">Additional Resources</a></li></ul></li></ul></section></li></ul> </aside> <main aria-labelledby="main-title" class="page"><div class="theme-default-content"><header><h1 class="text-3xl pt-6 pb-4  ">UK Data Service</h1> <p class="text-xl pb-12">Using Frictionless Data software to assess and report on data quality and make a case for generating visualizations with ensuing data and metadata. </p> <time class="italic"> December 12, 2017 by Max Examplemann </time> <div class="pt-2 text-blue-500"><img src="https://image.flaticon.com/icons/png/512/94/94699.png" class="w-4 h-4 inline text-lg"> </div></header> <div class="content__default"><p>The UK Data Service, like many other research repository services, employs a range of closed source software solutions for the publication and consumption of research data. The data itself is often published in closed and proprietary data formats, and the data is not always, or purposefully, published in a way that enables data reuse.</p> <p>Based on an initial exploration of user need, we identified, together with the UK Data Service, the following areas for a Frictionless Data pilot:</p> <ul><li>Conversion of data and metadata to open formats using open source tools.</li> <li>Use the Frictionless Data toolchain to assess and report on data quality (as a proxy for reusability).</li> <li>Demonstrate the possibility of generating visualizations from source data and metadata, described with Frictionless Data specifications.</li> <li>Host the data with all these attributes (open formats, reusable quality, visualized) on an open source platform for data.</li></ul> <p>We worked with data that was publicly accessible, and therefore in its post-publication phase. This also informed the way we designed the work, as a set of connected processing and transport steps, very much outside of the publication process itself. While this was acceptable for the scope of the pilot, the real power of the approach we demonstrate here is in integrating it with pre-publication phases of data, via a combined automated and manually curated data process. Indeed, we can see via this pilot the potential to streamline the workflow demonstrated into a complete research data publication process, and would welcome the opportunity to conduct one or more pilots that build on this approach, deeply integrated into pre-publication data workflows.</p> <h2 id="context"><a href="#context" class="header-anchor">#</a> Context</h2> <p>The UK Data Service offers an online repository where researchers can archive, publish and share research data, called <a href="http://reshare.ukdataservice.ac.uk/" target="_blank" rel="noopener noreferrer">Reshare<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. Reshare exposes an <a href="https://www.openarchives.org/pmh/" target="_blank" rel="noopener noreferrer">OAI-PMH<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> endpoint to facilitate metadata harvesting.</p> <p><a href="http://datahub.io/" target="_blank" rel="noopener noreferrer">datahub.io<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> is a data workflows web application build around the modular Frictionless Data toolchain, designed to find, share and publish high quality data online. Each entry has a ‘Showcase’ to display data package properties, and preview data with tables and simple visualisations. As well as the Showcase, <a href="http://datahub.io/" target="_blank" rel="noopener noreferrer">datahub.io<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> provides straight-forward direct access to import data into a variety of tools used by researchers; R, Pandas, Python, JavaScript, and SQL. <a href="/data-packages/">Frictionless Data Data Packages</a> can be pushed to <a href="http://datahub.io" target="_blank" rel="noopener noreferrer">datahub.io<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> to create dataset entries.</p> <h3 id="problem-we-were-trying-to-solve"><a href="#problem-we-were-trying-to-solve" class="header-anchor">#</a> Problem We Were Trying To Solve</h3> <p>We want to investigate the use of the Data Package concept, and Frictionless Data software to facilitate the reuse of data archived in Reshare.</p> <p>We are especially interested in trialling pipelines to automate data harvesting from UKDS into <a href="http://datahub.io/" target="_blank" rel="noopener noreferrer">datahub.io<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> using Frictionless Data software such as <a href="https://github.com/frictionlessdata/datapackage-pipelines" target="_blank" rel="noopener noreferrer">datapackage-pipelines<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, and creating appropriate processors to translate widely used statistics file formats, such as <a href="https://www.ibm.com/analytics/us/en/technology/spss/" target="_blank" rel="noopener noreferrer">SPSS<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, to text-based tabular data formats such as CSV.</p> <p>We chose the Data Package Pipelines library because it provides us with a well tested and mature framework of established processors to work with tabular data from a variety of sources and formats. Custom processors can easily be added to extend pipeline functionality. Pipelines can be configured using a simple declarative specification. Other tools supporting the underlying Frictionless Data specifications, such as <a href="https://github.com/frictionlessdata/tableschema-py/" target="_blank" rel="noopener noreferrer">tableschema<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> and <a href="https://github.com/frictionlessdata/tableschema-py/" target="_blank" rel="noopener noreferrer">goodtables<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> can be easily integrated as appropriate.</p> <p>In this pilot we are trialling tools to:</p> <ul><li>automate data harvesting from UKDS, to <a href="http://datahub.io/" target="_blank" rel="noopener noreferrer">datahub.io<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, through a data package pipeline.</li> <li>translate binary data formats (SPSS) to text-based tabular formats.</li> <li>validate tabular data harvested from UKDS with goodtables.</li> <li>fix or workaround common data issues identified from validation report, in the source-spec</li> <li>correct file encoding</li> <li>skip non-data rows</li> <li>skip specified validation checks (duplicate-rows)</li> <li>specify header rows in csv files</li> <li>explicitly defining tabular headers</li> <li>trial the <a href="http://datahub.io/" target="_blank" rel="noopener noreferrer">datahub.io<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> API with real-world data</li> <li>use the Showcase features of <a href="http://datahub.io/" target="_blank" rel="noopener noreferrer">datahub.io<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> to provide instance data previews and visualisations.</li></ul> <h3 id="the-work"><a href="#the-work" class="header-anchor">#</a> The Work</h3> <h4 id="what-did-we-do"><a href="#what-did-we-do" class="header-anchor">#</a> What Did We Do</h4> <p>During the pilot, we focussed on creating a reusable pipeline of processors to harvest data and dataset metadata from the UKDS Reshare service, and output valid Data Packages with tabular resources. Each pipeline processor step was created as a separate module to facilitate testing and reuse in other similar pipelines.</p> <p>UKDS datasets were selected from <a href="http://reshare.ukdataservice.ac.uk/cgi/stats/report/most_popular_eprints" target="_blank" rel="noopener noreferrer">the UKDS list<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. Entries were selected based on the data format we intended to write processors for (.csv, .tsv, xls, or .sav), how the dataset might help demonstrate various aspects of the pipeline, and how well they might lend themselves to visualisation on <a href="http://datahub.io/" target="_blank" rel="noopener noreferrer">datahub.io<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <p>Below is an outline of the pipeline flow from UKDS Reshare Archive to <a href="http://datahub.io/" target="_blank" rel="noopener noreferrer">datahub.io<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> entry:</p> <p><img src="/assets/img/ukds-pipeline-flow.8cf26465.png" alt="pipeline flow from UKDS Reshare Archive to datahub.io"><br> <em>pipeline flow from UKDS Reshare Archive to <a href="http://datahub.io/" target="_blank" rel="noopener noreferrer">datahub.io<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></em></p> <h5 id="specifying-an-entry"><a href="#specifying-an-entry" class="header-anchor">#</a> Specifying an Entry</h5> <p>We wanted to ensure that each UKDS dataset to be maintained on <a href="http://datahub.io/" target="_blank" rel="noopener noreferrer">datahub.io<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> could be easily configured to specify where to harvest its resource data and dataset metadata. We also wanted to add other configuration details to help customise the pipeline to work with tricky resources, and view specifications for subsequent visualisation on <a href="http://datahub.io/" target="_blank" rel="noopener noreferrer">datahub.io<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <p>The source-spec for each Reshare entry defines a list of URLs for each resource in the dataset that we’re interested in harvesting, and the resource format (csv, tsv, xls, or spss).</p> <p>If an OAI ID is provided, it will be used to harvest dataset metadata from the Reshare OAI endpoint.</p> <p>As well as defining source locations, we also want to provide a way to customise downstream processor behaviour, to help work around potential resource issues.</p> <p>Below is an example yaml source-spec for two entries, demonstrating various configuration options.</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">entries</span><span class="token punctuation">:</span>

  <span class="token key atrule">civil-servant-survey</span><span class="token punctuation">:</span>   <span class="token comment"># entry name</span>
    <span class="token key atrule">source</span><span class="token punctuation">:</span>               <span class="token comment"># a list of sources</span>
      <span class="token punctuation">-</span> <span class="token key atrule">url</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//reshare.ukdataservice.ac.uk/851401/10/Coded_SurveyData.csv
        <span class="token key atrule">format</span><span class="token punctuation">:</span> csv
      <span class="token punctuation">-</span> <span class="token key atrule">url</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//reshare.ukdataservice.ac.uk/851401/2/key%20%283%29.csv
        <span class="token key atrule">format</span><span class="token punctuation">:</span> csv
    <span class="token key atrule">goodtables</span><span class="token punctuation">:</span>           <span class="token comment"># custom processor config for goodtables</span>
      <span class="token key atrule">skip_checks</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> duplicate<span class="token punctuation">-</span>row
    <span class="token key atrule">oai-id</span><span class="token punctuation">:</span> <span class="token number">851401        </span><span class="token comment"># OAI ID to harvest dataset metadata</span>

  <span class="token key atrule">uk-gov-petitions</span><span class="token punctuation">:</span>
    <span class="token key atrule">source</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">url</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//reshare.ukdataservice.ac.uk/851614/1/gov_pet_metadata.tab
        <span class="token key atrule">format</span><span class="token punctuation">:</span> tsv
        <span class="token key atrule">tabulator</span><span class="token punctuation">:</span>        <span class="token comment"># custom processor config for tabulator</span>
          <span class="token key atrule">encoding</span><span class="token punctuation">:</span> utf<span class="token punctuation">-</span><span class="token number">8 </span><span class="token comment"># explicitly define source file encoding</span>
          <span class="token key atrule">headers</span><span class="token punctuation">:</span>        <span class="token comment"># explicitly define missing column headers</span>
            <span class="token punctuation">-</span> id
            <span class="token punctuation">-</span> title
            <span class="token punctuation">-</span> department
            <span class="token punctuation">-</span> starting
            <span class="token punctuation">-</span> closing
    <span class="token key atrule">oai-id</span><span class="token punctuation">:</span> <span class="token number">851614</span>
    <span class="token key atrule">views</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> views/petitions<span class="token punctuation">-</span>view.json
</code></pre></div><p>Sources in the first entry, <em>civil-servant-survey</em>, contain duplicate rows, which would normally fail goodtables validation. Here we will allow the <code>duplicate-row</code> check to be skipped.</p> <p>The source in the second entry has the wrong character encoding and no headers declared. We can fix these issues to allow the pipeline to process the resource by explicitly specifying the file encoding, and declaring the column headers.</p> <h4 id="data-set-and-resource-harvest"><a href="#data-set-and-resource-harvest" class="header-anchor">#</a> Data Set and Resource Harvest</h4> <p>We identified that Reshare has an OAI-PMH2 compatible endpoint to harvest information about each Reshare data set. So we created an <code>ukds.add_oai_metadata</code> pipeline processor. OAI metadata is compatible with Dublin Core Elements, and the processor translates this into Data Package compatible properties.</p> <p>Resources are added to the newly created Data Package and downloaded from the URLs defined in the yaml configuration. We support adding SPSS (.sav), CSV, TSV and XLS file formats.</p> <p>To support the widely used SPSS format, we created an <code>spss.add_spss processor</code> that makes use of the <a href="https://github.com/frictionlessdata/tableschema-spss-py" target="_blank" rel="noopener noreferrer">tableschema-spss<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> plugin to read SPSS files and create tableschema descriptors from them.</p> <h4 id="validation-reports-and-common-issues"><a href="#validation-reports-and-common-issues" class="header-anchor">#</a> Validation Reports and Common Issues</h4> <p>To help ensure data quality, we want to validate the harvested tabular data before continuing the pipeline. We created a <a href="https://github.com/frictionlessdata/datapackage-pipelines-goodtables" target="_blank" rel="noopener noreferrer"><code>goodtables.validate</code> processor<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, which will write a validation report for each resource. If a resource fails to validate against its schema, or has other data issues, the pipeline will fail. Errors can be identified from validation reports, fixed, and the pipeline re-run.</p> <p>Below are examples of  issues revealed by validation that can occur when working with real-world data.</p> <h5 id="“au-pairing-after-the-au-pair-scheme”-specifying-a-xls-sheet-and-working-around-non-data-rows"><a href="#“au-pairing-after-the-au-pair-scheme”-specifying-a-xls-sheet-and-working-around-non-data-rows" class="header-anchor">#</a> “Au pairing after the au pair scheme”: specifying a xls sheet, and working around non-data rows</h5> <p>The <a href="http://reshare.ukdataservice.ac.uk/851656/" target="_blank" rel="noopener noreferrer">“Au Pairing” dataset<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> has a single .xls resource we’re interested in harvesting. The file contains four sheets, and we’re interested in the second one, which contains the data. So we specify our entry:</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">au-pairing</span><span class="token punctuation">:</span>
    <span class="token key atrule">source</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">url</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//reshare.ukdataservice.ac.uk/851656/6/GumtreeAds_AuPairsAnalysis1.xls
        <span class="token key atrule">format</span><span class="token punctuation">:</span> xls
        <span class="token key atrule">tabulator</span><span class="token punctuation">:</span>
          <span class="token key atrule">sheet</span><span class="token punctuation">:</span> <span class="token number">2  </span><span class="token comment"># use sheet 2 in the file</span>
    <span class="token key atrule">oai-id</span><span class="token punctuation">:</span> <span class="token number">851656</span>
</code></pre></div><p>Notice we have indicated which sheet in the file to use.</p> <p>The data sheet has a single header row, but it also has this header row repeated at intervals throughout the data, presumably to aid the human reader when reviewing the data manually.</p> <p><img src="/assets/img/ukds-au-pairing-datasheet.6d159749.png" alt=""><br> <em>screengrab of the UKDS “Au Pairing” datasheet</em></p> <p>For machine processing, this isn’t ideal. In fact, it will fail our goodtables validation processor with the following (truncated) report:</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token punctuation">{</span>
    <span class="token key atrule">&quot;time&quot;</span><span class="token punctuation">:</span> <span class="token number">0.466</span><span class="token punctuation">,</span>
    <span class="token key atrule">&quot;valid&quot;</span><span class="token punctuation">:</span> <span class="token boolean important">false</span><span class="token punctuation">,</span>
    <span class="token key atrule">&quot;error-count&quot;</span><span class="token punctuation">:</span> <span class="token number">13</span><span class="token punctuation">,</span>
    <span class="token key atrule">&quot;table-count&quot;</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token key atrule">&quot;tables&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            <span class="token punctuation">...</span>
            <span class="token key atrule">&quot;errors&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
                <span class="token punctuation">{</span>
                    <span class="token key atrule">&quot;code&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;duplicate-row&quot;</span><span class="token punctuation">,</span>
                    <span class="token key atrule">&quot;message&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;Row 347 is duplicated to row(s) 236&quot;</span><span class="token punctuation">,</span>
                    <span class="token key atrule">&quot;row-number&quot;</span><span class="token punctuation">:</span> <span class="token number">347</span><span class="token punctuation">,</span>
                    <span class="token key atrule">&quot;column-number&quot;</span><span class="token punctuation">:</span> <span class="token null important">null</span><span class="token punctuation">,</span>
                    <span class="token key atrule">&quot;row&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
                        <span class="token string">&quot;happy/energetic/caring/loving outlook required&quot;</span><span class="token punctuation">,</span>
                        <span class="token string">&quot;CV requested&quot;</span><span class="token punctuation">,</span>
                        <span class="token string">&quot;gender specified&quot;</span><span class="token punctuation">,</span>
                        <span class="token string">&quot;cooking&quot;</span><span class="token punctuation">,</span>
                        <span class="token punctuation">...</span>
                    <span class="token punctuation">]</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token punctuation">...</span>
            <span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">...</span>
<span class="token punctuation">}</span>
</code></pre></div><p>You can find the full report <a href="https://gist.github.com/brew/8401e2875ec6d829baf95b79cd677e28" target="_blank" rel="noopener noreferrer">here<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <p>The report tells us there are 13 errors, and lists where they are. In this case they indicate that duplicate rows are present (the repeated header). This can either be fixed within Reshare, or we can add a parameter to our entry specification to skip each row that contains the duplicate header:</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">au-pairing</span><span class="token punctuation">:</span>
    <span class="token key atrule">source</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">url</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//reshare.ukdataservice.ac.uk/851656/6/GumtreeAds_AuPairsAnalysis1.xls
        <span class="token key atrule">format</span><span class="token punctuation">:</span> xls
        <span class="token key atrule">tabulator</span><span class="token punctuation">:</span>
          <span class="token key atrule">sheet</span><span class="token punctuation">:</span> <span class="token number">2</span>
          <span class="token key atrule">skip_rows</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">237</span><span class="token punctuation">,</span> <span class="token number">292</span><span class="token punctuation">,</span> <span class="token number">348</span><span class="token punctuation">,</span> <span class="token number">402</span><span class="token punctuation">,</span> <span class="token number">458</span><span class="token punctuation">,</span> <span class="token number">511</span><span class="token punctuation">,</span> <span class="token number">564</span><span class="token punctuation">,</span> <span class="token number">618</span><span class="token punctuation">,</span> <span class="token number">673</span><span class="token punctuation">,</span> <span class="token number">726</span><span class="token punctuation">,</span> <span class="token number">779</span><span class="token punctuation">,</span> <span class="token number">832</span><span class="token punctuation">,</span> <span class="token number">886</span><span class="token punctuation">,</span> <span class="token number">937</span><span class="token punctuation">,</span> <span class="token number">990</span><span class="token punctuation">]</span>
    <span class="token key atrule">goodtables</span><span class="token punctuation">:</span>
      <span class="token key atrule">skip_checks</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> duplicate<span class="token punctuation">-</span>row
    <span class="token key atrule">oai-id</span><span class="token punctuation">:</span> <span class="token number">851656</span>
</code></pre></div><p>Above we’ve added a <code>skip_rows</code> parameter with a list of row numbers to skip when generating the data package. We also instruct goodtables to skip the <code>duplicate-row</code> check.<br>
The outputted csv resource file will no longer contain rows with the duplicate header.</p> <h5 id="“uk-government-petitions”-wrong-file-encoding-and-specifying-missing-headers"><a href="#“uk-government-petitions”-wrong-file-encoding-and-specifying-missing-headers" class="header-anchor">#</a> “UK government petitions”: wrong file encoding, and specifying missing headers</h5> <p>The “<a href="http://gov.uk/" target="_blank" rel="noopener noreferrer">gov.uk<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> petitions” dataset has a TSV data file we’re interested in. However, it has been saved with the wrong character encoding and attempting to open may return an error, or display some characters incorrectly.</p> <p>Additionally, there is no header row specified at the top of the file, so the resulting data package won’t have the correct header information in the resource’s schema.</p> <p>We can fix both of these issues in our entry specification:</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">uk-gov-petitions</span><span class="token punctuation">:</span>
    <span class="token key atrule">source</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">url</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//reshare.ukdataservice.ac.uk/851614/1/gov_pet_metadata.tab
        <span class="token key atrule">format</span><span class="token punctuation">:</span> tsv
        <span class="token key atrule">tabulator</span><span class="token punctuation">:</span>
          <span class="token key atrule">encoding</span><span class="token punctuation">:</span> utf<span class="token punctuation">-</span><span class="token number">8  </span><span class="token comment"># specify file encoding</span>
          <span class="token key atrule">headers</span><span class="token punctuation">:</span>         <span class="token comment"># define missing headers</span>
            <span class="token punctuation">-</span> id
            <span class="token punctuation">-</span> title
            <span class="token punctuation">-</span> department
            <span class="token punctuation">-</span> starting
            <span class="token punctuation">-</span> closing
    <span class="token key atrule">oai-id</span><span class="token punctuation">:</span> <span class="token number">851614</span>
</code></pre></div><p>Above, we have defined the character encoding we want to use when opening the file, and we’ve explicitly defined the headers to use. These headers will be added to the first row of the outputted csv resource file in the data package.</p> <p>We can also use the <code>headers</code> parameter to define which row contains header information. By default this is the first row. However, sometimes a data file will have the headers on a different row:</p> <p><img src="/assets/img/ukds-govt-petitions-datasheet.d9d1cb8a.png" alt=""><br> <em>screengrab of the UKDS “Government Petitions” datasheet</em></p> <p>This example file has its headers defined in row three, with other information, and an empty row in the first two rows. We can tell our pipeline which row contains headers by specifying it in the entry configuration:</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">example-entry</span><span class="token punctuation">:</span>
    <span class="token key atrule">source</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">url</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//www.newcastle.gov.uk/sites/drupalncc.newcastle.gov.uk/files/wwwfileroot/your<span class="token punctuation">-</span>council/local_transparency/january_2012.csv
        <span class="token key atrule">format</span><span class="token punctuation">:</span> csv
        <span class="token key atrule">tabulator</span><span class="token punctuation">:</span>
          <span class="token key atrule">headers</span><span class="token punctuation">:</span> <span class="token number">3  </span><span class="token comment"># specifying which row contains headers</span>
</code></pre></div><h4 id="add-data-package-views"><a href="#add-data-package-views" class="header-anchor">#</a> Add Data Package Views</h4> <p>View specs can be added to the data package to enable <a href="http://datahub.io/" target="_blank" rel="noopener noreferrer">datahub.io<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> to create visualisations from resource data in the data package. The <code>views</code> property is a list of file paths to json files containing <a href="https://specs.frictionlessdata.io/views/" target="_blank" rel="noopener noreferrer">view-spec<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> compatible views.</p> <p>Currently, <a href="http://datahub.io/" target="_blank" rel="noopener noreferrer">datahub.io<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> supports views written either with a ‘simple’ views-spec, or using Vega (v 2.6.5). See <a href="https://datahub.io/docs/features/views" target="_blank" rel="noopener noreferrer">datahub.io docs<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> for more details about the supported views-spec.</p> <h4 id="push-to-datahub-io"><a href="#push-to-datahub-io" class="header-anchor">#</a> Push to <a href="http://datahub.io/" target="_blank" rel="noopener noreferrer">datahub.io<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h4> <p>Once the harvesting pipeline has been run the resulting data packages are pushed to <a href="http://datahub.io/" target="_blank" rel="noopener noreferrer">datahub.io<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> using the <a href="https://github.com/datahq/datahub-cli" target="_blank" rel="noopener noreferrer"><code>datahub.dump.to_datahub</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> processor.</p> <p>This creates or updates an entry for the package on datahub. If a view has been defined in the entry configuration, this will be created on the <a href="http://datahub.io/" target="_blank" rel="noopener noreferrer">datahub.io<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> entry Showcase page.</p> <h3 id="review"><a href="#review" class="header-anchor">#</a> Review</h3> <p>We were able to demonstrate that a data processing pipeline using Frictionless Data tools can facilitate the automated harvesting, validation, transformation, and upload to a data package-compatible third-party service, based on a simple configuration.</p> <h3 id="next-steps"><a href="#next-steps" class="header-anchor">#</a> Next Steps</h3> <p>The pilot data package pipeline runs locally in a development environment, but given each processor has been written as a separate module, these could be used within any pipeline. <a href="http://datahub.io/" target="_blank" rel="noopener noreferrer">datahub.io<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> uses datapackage-pipelines within its infrastructure, and the processors developed for this project could be used within <a href="http://datahub.io/" target="_blank" rel="noopener noreferrer">datahub.io<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> itself to facilitate the automatic harvesting of datasets from OAI-PMH enabled data sources.</p> <p>Once a pipeline is in place, it can be scheduled to run each day (or week, month, etc.). This would ensure <a href="http://datahub.io/" target="_blank" rel="noopener noreferrer">datahub.io<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> is up-to-date with data on UKDS Reshare.</p> <p>Working with ‘real-world’ data from UKDS Reshare has helped to identify and prioritise improvements and future features for <a href="http://datahub.io/" target="_blank" rel="noopener noreferrer">datahub.io<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <h3 id="additional-resources"><a href="#additional-resources" class="header-anchor">#</a> Additional Resources</h3> <ul><li><a href="https://github.com/frictionlessdata/pilot-ukds" target="_blank" rel="noopener noreferrer">The main code repository for this pilot<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</li> <li><a href="https://github.com/frictionlessdata/datapackage-pipelines" target="_blank" rel="noopener noreferrer">A framework for processing data packages in pipelines of modular components<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</li> <li><a href="https://github.com/frictionlessdata/datapackage-pipelines-spss" target="_blank" rel="noopener noreferrer">A Data Package Pipelines processor for SPSS file formats<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</li> <li><a href="https://github.com/frictionlessdata/datapackage-pipelines-goodtables" target="_blank" rel="noopener noreferrer">A Data Package Pipelines processor for validating tabular data using goodtables-py<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</li> <li><a href="https://github.com/datahq/datapackage-pipelines-datahub" target="_blank" rel="noopener noreferrer">A Data Package Pipelines processor to push data packages to datahub.io<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</li></ul></div> <footer><a href="/blog/" class="font-light"> &lt; Go back</a></footer></div></main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.00f08ef0.js" defer></script><script src="/assets/js/5.ffd5ee63.js" defer></script><script src="/assets/js/2.10065e94.js" defer></script><script src="/assets/js/10.e598e053.js" defer></script>
  </body>
</html>
