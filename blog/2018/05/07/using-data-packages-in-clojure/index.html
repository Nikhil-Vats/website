<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Using Data Packages in Clojure | Frictionless Data</title>
    <meta name="description" content="Bringing simplicity and gracefulness to the data experience">
    <script src="https://unpkg.com/honeycomb-grid@3.1.3"></script>
  <script src="https://unpkg.com/svg.js@2.7.1"></script>
    
    <link rel="preload" href="/assets/css/0.styles.7dd213d5.css" as="style"><link rel="preload" href="/assets/js/app.8683ac4c.js" as="script"><link rel="preload" href="/assets/js/6.6b553f36.js" as="script"><link rel="preload" href="/assets/js/2.d1974d30.js" as="script"><link rel="preload" href="/assets/js/60.ac4e3c13.js" as="script"><link rel="prefetch" href="/assets/js/10.38e3c208.js"><link rel="prefetch" href="/assets/js/11.d3ceaee2.js"><link rel="prefetch" href="/assets/js/12.6bf26d07.js"><link rel="prefetch" href="/assets/js/13.6746fee1.js"><link rel="prefetch" href="/assets/js/14.5a59d1ab.js"><link rel="prefetch" href="/assets/js/15.49ef2e51.js"><link rel="prefetch" href="/assets/js/16.a610bccb.js"><link rel="prefetch" href="/assets/js/17.119a4c7c.js"><link rel="prefetch" href="/assets/js/18.f6ac6183.js"><link rel="prefetch" href="/assets/js/19.d470a15d.js"><link rel="prefetch" href="/assets/js/20.267ca561.js"><link rel="prefetch" href="/assets/js/21.9687ff90.js"><link rel="prefetch" href="/assets/js/22.3e0f5bff.js"><link rel="prefetch" href="/assets/js/23.3282425b.js"><link rel="prefetch" href="/assets/js/24.02624bad.js"><link rel="prefetch" href="/assets/js/25.6e8cd982.js"><link rel="prefetch" href="/assets/js/26.3b3e2057.js"><link rel="prefetch" href="/assets/js/27.8479d316.js"><link rel="prefetch" href="/assets/js/28.3ae7ecce.js"><link rel="prefetch" href="/assets/js/29.b032cff4.js"><link rel="prefetch" href="/assets/js/3.a93e643b.js"><link rel="prefetch" href="/assets/js/30.f4835a6a.js"><link rel="prefetch" href="/assets/js/31.85cc09bf.js"><link rel="prefetch" href="/assets/js/32.3cd76e49.js"><link rel="prefetch" href="/assets/js/33.679f1cc6.js"><link rel="prefetch" href="/assets/js/34.737e503d.js"><link rel="prefetch" href="/assets/js/35.8b39c601.js"><link rel="prefetch" href="/assets/js/36.f773ef4d.js"><link rel="prefetch" href="/assets/js/37.bbba5795.js"><link rel="prefetch" href="/assets/js/38.3deec83d.js"><link rel="prefetch" href="/assets/js/39.b23957b5.js"><link rel="prefetch" href="/assets/js/4.bb95f045.js"><link rel="prefetch" href="/assets/js/40.ec68fd75.js"><link rel="prefetch" href="/assets/js/41.dbdee0c9.js"><link rel="prefetch" href="/assets/js/42.7750463e.js"><link rel="prefetch" href="/assets/js/43.f40efdb2.js"><link rel="prefetch" href="/assets/js/44.3c272495.js"><link rel="prefetch" href="/assets/js/45.8ef344b2.js"><link rel="prefetch" href="/assets/js/46.5a31e9eb.js"><link rel="prefetch" href="/assets/js/47.a7238101.js"><link rel="prefetch" href="/assets/js/48.910661cb.js"><link rel="prefetch" href="/assets/js/49.5018def7.js"><link rel="prefetch" href="/assets/js/5.a9280237.js"><link rel="prefetch" href="/assets/js/50.d827674c.js"><link rel="prefetch" href="/assets/js/51.23cb5995.js"><link rel="prefetch" href="/assets/js/52.a31f6ace.js"><link rel="prefetch" href="/assets/js/53.04bffaf5.js"><link rel="prefetch" href="/assets/js/54.adecbe4b.js"><link rel="prefetch" href="/assets/js/55.47f61434.js"><link rel="prefetch" href="/assets/js/56.195bdc6d.js"><link rel="prefetch" href="/assets/js/57.a62f3733.js"><link rel="prefetch" href="/assets/js/58.a5195a90.js"><link rel="prefetch" href="/assets/js/59.0b9dfdd6.js"><link rel="prefetch" href="/assets/js/61.998ff74f.js"><link rel="prefetch" href="/assets/js/62.7f738fde.js"><link rel="prefetch" href="/assets/js/63.b70382df.js"><link rel="prefetch" href="/assets/js/64.e3c3c4de.js"><link rel="prefetch" href="/assets/js/65.51ba912d.js"><link rel="prefetch" href="/assets/js/66.ce103ce7.js"><link rel="prefetch" href="/assets/js/67.e598c5dd.js"><link rel="prefetch" href="/assets/js/68.4c279a01.js"><link rel="prefetch" href="/assets/js/69.41a32dd1.js"><link rel="prefetch" href="/assets/js/7.9ad333a9.js"><link rel="prefetch" href="/assets/js/70.1fb5c766.js"><link rel="prefetch" href="/assets/js/71.ff8a1b19.js"><link rel="prefetch" href="/assets/js/72.8bde65a3.js"><link rel="prefetch" href="/assets/js/73.d0b7152c.js"><link rel="prefetch" href="/assets/js/74.a0b26d28.js"><link rel="prefetch" href="/assets/js/75.ba435b37.js"><link rel="prefetch" href="/assets/js/76.a9708a3a.js"><link rel="prefetch" href="/assets/js/77.7d7a41e0.js"><link rel="prefetch" href="/assets/js/78.5d80d707.js"><link rel="prefetch" href="/assets/js/79.ceee8ea3.js"><link rel="prefetch" href="/assets/js/8.428f6b5a.js"><link rel="prefetch" href="/assets/js/80.356a4a99.js"><link rel="prefetch" href="/assets/js/81.e450c5f1.js"><link rel="prefetch" href="/assets/js/82.47a5baf2.js"><link rel="prefetch" href="/assets/js/83.9e14148e.js"><link rel="prefetch" href="/assets/js/84.2df38a6d.js"><link rel="prefetch" href="/assets/js/85.c2ff1e22.js"><link rel="prefetch" href="/assets/js/86.3fe4e5e6.js"><link rel="prefetch" href="/assets/js/87.8dfcb9dc.js"><link rel="prefetch" href="/assets/js/88.09e9bf2c.js"><link rel="prefetch" href="/assets/js/89.8a24edac.js"><link rel="prefetch" href="/assets/js/9.5f34e22e.js"><link rel="prefetch" href="/assets/js/90.62846104.js"><link rel="prefetch" href="/assets/js/91.bbef675c.js"><link rel="prefetch" href="/assets/js/92.bd7970a1.js"><link rel="prefetch" href="/assets/js/93.0561d3fd.js"><link rel="prefetch" href="/assets/js/94.561a3a0f.js"><link rel="prefetch" href="/assets/js/95.b0ce88da.js"><link rel="prefetch" href="/assets/js/96.373ab984.js"><link rel="prefetch" href="/assets/js/97.34917fa7.js"><link rel="prefetch" href="/assets/js/98.221efc57.js">
    <link rel="stylesheet" href="/assets/css/0.styles.7dd213d5.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container Post"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/frictionless-data-blue-logo-text.png" alt="Frictionless Data" class="logo"> <span class="site-name can-hide">Frictionless Data</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/about/" class="nav-link">About</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Products" class="dropdown-title"><span class="title">Products</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/products/data-package/" class="nav-link">Data Package</a></li><li class="dropdown-item"><!----> <a href="/products/table-schema/" class="nav-link">Table Schema</a></li><li class="dropdown-item"><!----> <a href="/products/tabulator/" class="nav-link">Tabulator</a></li><li class="dropdown-item"><!----> <a href="/products/goodtables/" class="nav-link">GoodTables</a></li><li class="dropdown-item"><!----> <a href="/products/data-package-pipelines/" class="nav-link">Data Package Pipelines</a></li><li class="dropdown-item"><!----> <a href="/products/datahub/" class="nav-link">DataHub</a></li><li class="dropdown-item"><h4></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/products/labs/" class="nav-link">Labs</a></li></ul></li></ul></div></div><div class="nav-item"><a href="http://specs.frictionlessdata.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Specifications
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="/contribute/" class="nav-link">Contribute</a></div><div class="nav-item"><a href="/team/" class="nav-link">Team</a></div><div class="nav-item"><a href="/blog/" class="nav-link router-link-active">Blog</a></div> <a href="https://github.com/frictionlessdata" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/about/" class="nav-link">About</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Products" class="dropdown-title"><span class="title">Products</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/products/data-package/" class="nav-link">Data Package</a></li><li class="dropdown-item"><!----> <a href="/products/table-schema/" class="nav-link">Table Schema</a></li><li class="dropdown-item"><!----> <a href="/products/tabulator/" class="nav-link">Tabulator</a></li><li class="dropdown-item"><!----> <a href="/products/goodtables/" class="nav-link">GoodTables</a></li><li class="dropdown-item"><!----> <a href="/products/data-package-pipelines/" class="nav-link">Data Package Pipelines</a></li><li class="dropdown-item"><!----> <a href="/products/datahub/" class="nav-link">DataHub</a></li><li class="dropdown-item"><h4></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/products/labs/" class="nav-link">Labs</a></li></ul></li></ul></div></div><div class="nav-item"><a href="http://specs.frictionlessdata.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Specifications
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="/contribute/" class="nav-link">Contribute</a></div><div class="nav-item"><a href="/team/" class="nav-link">Team</a></div><div class="nav-item"><a href="/blog/" class="nav-link router-link-active">Blog</a></div> <a href="https://github.com/frictionlessdata" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Using Data Packages in Clojure</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/2018/05/07/using-data-packages-in-clojure/#setup" class="sidebar-link">Setup</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/2018/05/07/using-data-packages-in-clojure/#the-data" class="sidebar-link">The Data</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/2018/05/07/using-data-packages-in-clojure/#loading-the-data-package" class="sidebar-link">Loading the Data Package</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/2018/05/07/using-data-packages-in-clojure/#casting-types-with-core-spec" class="sidebar-link">Casting Types with core.spec</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main aria-labelledby="main-title" class="page"><div class="theme-default-content"><header><h1 class="text-3xl pt-6">Using Data Packages in Clojure</h1> <p class="text-xl pb-6"> </p> <time class="italic"> May 7, 2018 by Frictionless Data </time> <div class="pt-4 text-blue-500 pb-6"><img src="https://image.flaticon.com/icons/png/512/94/94699.png" class="w-4 h-4 inline text-lg"> <a href="/blog/2018/05/07/using-data-packages-in-clojure/" class="pl-2 router-link-exact-active router-link-active">
    Clojure
  </a></div></header> <div class="content__default"><p>! Matt Thompson was one of 2017’s <a href="https://toolfund.frictionlessdata.io" target="_blank" rel="noopener noreferrer">Frictionless Data Tool Fund<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> grantees tasked with extending implementation of core Frictionless Data <a href="https://github.com/frictionlessdata/datapackage-clj" target="_blank" rel="noopener noreferrer">data package<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> and <a href="https://github.com/frictionlessdata/tableschema-clj" target="_blank" rel="noopener noreferrer">table schema<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> libraries in Clojure programming language. You can read more about this in <a href="/articles/matt-thompson/">his grantee profile</a>. In this post, Thompson will show you how to set up and use the <a href="http://clojure.org" target="_blank" rel="noopener noreferrer">Clojure<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> libraries for working with <a href="/specs/tabular-data-package/">Tabular Data Packages</a>.</p> <p>This tutorial uses a worked example of downloading a data package from a remote location on the web, and using the Frictionless Data tools to read its contents and metadata into Clojure data structures.</p> <h2 id="setup"><a href="#setup" class="header-anchor">#</a> Setup</h2> <p>First, we need to set up the project structure using the <a href="http://leiningen.org" target="_blank" rel="noopener noreferrer">Leiningen<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> tool. If you don’t have Leiningen set up on your system, follow the link to download and install it. Once it is set up, run the following command from the command line to create the folders and files for a basic Clojure project:</p> <div class="language-sh extra-class"><pre class="language-sh"><code>
lein new periodic-table

</code></pre></div><p>This will create the <em>periodic-table</em> folder. Inside the <em>periodic-table/src/periodic-table</em> folder should be a file named <em>core.clj</em>. This is the file you need to edit during this tutorial.</p> <h2 id="the-data"><a href="#the-data" class="header-anchor">#</a> The Data</h2> <p>For this tutorial, we will use a pre-created data package, the Periodic Table Data Package hosted by the Frictionless Data project. A <a href="/specs/data-package/">Data Package</a> is a simple container format used to describe and package a collection of data. It consists of two parts:</p> <ul><li>Metadata that describes the structure and contents of the package</li> <li>Resources such as data files that form the contents of the package</li></ul> <p>Our Clojure code will download the data package and process it using the metadata information contained in the<br>
package. The data package can be found <a href="https://raw.githubusercontent.com/frictionlessdata/example-data-packages/62d47b454d95a95b6029214b9533de79401e953a/periodic-table/datapackage.json" target="_blank" rel="noopener noreferrer">here on GitHub<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <p>The data package contains data about elements in the periodic table, including each element’s name, atomic number, symbol and atomic weight. The table below shows a sample taken from the first three rows of the CSV file:</p> <table><thead><tr><th>atomic number</th> <th>symbol</th> <th>name</th> <th>atomic mass</th> <th>metal or nonmetal?</th></tr></thead> <tbody><tr><td>1</td> <td>H</td> <td>Hydrogen</td> <td>1.00794</td> <td>nonmetal</td></tr> <tr><td>2</td> <td>He</td> <td>Helium</td> <td>4.002602</td> <td>noble gas</td></tr> <tr><td>3</td> <td>Li</td> <td>Lithium</td> <td>6.941</td> <td>alkali metal</td></tr></tbody></table> <h2 id="loading-the-data-package"><a href="#loading-the-data-package" class="header-anchor">#</a> Loading the Data Package</h2> <p>The first step is to load the data package into a Clojure data structure (a map). The initial step is to require the data package library in our code (which we will give the alias <strong>dp</strong>). Then we can use the <strong>load</strong> function to load our data package into our project. Enter the following code into the core.clj file:</p> <div class="language-clojure extra-class"><pre class="language-clojure"><code><span class="token punctuation">(</span><span class="token keyword">ns</span> periodic-table.core
  <span class="token punctuation">(</span><span class="token operator">:require</span> <span class="token punctuation">[</span>frictionlessdata.datapackage <span class="token operator">:as</span> dp<span class="token punctuation">]</span>
            <span class="token punctuation">[</span>frictionlessdata.tableschema <span class="token operator">:as</span> ts<span class="token punctuation">]</span>
            <span class="token punctuation">[</span>clojure.spec.alpha <span class="token operator">:as</span> s<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token punctuation">(</span><span class="token keyword">def</span> pkg
  <span class="token punctuation">(</span>dp/<span class="token keyword">load</span> <span class="token string">&quot;https://raw.githubusercontent.com/frictionlessdata/example-data-packages/62d47b454d95a95b6029214b9533de79401e953a/periodic-table/datapackage.json&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>This pulls the data in from the remote GitHub location and converts the metadata into a Clojure map. We can access this metadata by using the <code>descriptor</code> function along with keys such as <code>:name</code> and <code>:title</code> to get the relevant information:</p> <div class="language-clojure extra-class"><pre class="language-clojure"><code><span class="token punctuation">(</span><span class="token keyword">println</span> <span class="token punctuation">(</span><span class="token keyword">str</span> <span class="token string">&quot;Package name:&quot;</span> <span class="token punctuation">(</span>dp/descriptor pkg <span class="token operator">:name</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span><span class="token keyword">println</span> <span class="token punctuation">(</span><span class="token keyword">str</span> <span class="token string">&quot;Package title:&quot;</span> <span class="token punctuation">(</span>dp/descriptor pkg <span class="token operator">:title</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>The package descriptor contains metadata that describes the contents of the data package. What about accessing the data itself? We can get to it using the <code>get-resources</code> function:</p> <div class="language-clojure extra-class"><pre class="language-clojure"><code><span class="token punctuation">(</span><span class="token keyword">def</span> table <span class="token punctuation">(</span>dp/get-resources pkg <span class="token operator">:data</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token punctuation">(</span><span class="token keyword">doseq</span> <span class="token punctuation">[</span>row table<span class="token punctuation">]</span>
  <span class="token punctuation">(</span><span class="token keyword">println</span> row<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>The above code locates the data in the data package, then goes through it line by line and prints the contents.</p> <h2 id="casting-types-with-core-spec"><a href="#casting-types-with-core-spec" class="header-anchor">#</a> Casting Types with core.spec</h2> <p>We can use Clojure’s <a href="https://clojure.org/guides/spec" target="_blank" rel="noopener noreferrer">spec<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> library to define a schema for our data, which can then be used to cast the types of the data in the CSV file.</p> <p>Below is a spec description of a periodic element type, consisting of an atomic number, atomic symbol, the element’s name, its mass, and whether or not the element is a metal or non-metal:</p> <div class="language-clojure extra-class"><pre class="language-clojure"><code><span class="token punctuation">(</span>s/<span class="token keyword">def</span> <span class="token operator">::number</span> int?<span class="token punctuation">)</span>
<span class="token punctuation">(</span>s/<span class="token keyword">def</span> <span class="token operator">::symbol</span> <span class="token keyword">string?</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span>s/<span class="token keyword">def</span> <span class="token operator">::name</span> <span class="token keyword">string?</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span>s/<span class="token keyword">def</span> <span class="token operator">::mass</span> float?<span class="token punctuation">)</span>
<span class="token punctuation">(</span>s/<span class="token keyword">def</span> <span class="token operator">::metal</span> <span class="token keyword">string?</span><span class="token punctuation">)</span>

<span class="token punctuation">(</span>s/<span class="token keyword">def</span> <span class="token operator">::element</span> <span class="token punctuation">(</span>s/<span class="token keyword">keys</span> <span class="token operator">:req</span> <span class="token punctuation">[</span><span class="token operator">::number</span> <span class="token operator">::symbol</span> <span class="token operator">::name</span> <span class="token operator">::mass</span> <span class="token operator">::metal</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>The above spec can be used to cast values in our tabular data so that they match the specified schema. The example below shows our tabular data values being cast to fit the spec description. Then the <code>-main</code> function loops through the elements, printing only those with an atomic mass of over 10.</p> <div class="language-clojure extra-class"><pre class="language-clojure"><code><span class="token punctuation">(</span><span class="token keyword">ns</span> periodic-table.core
  <span class="token punctuation">(</span><span class="token operator">:require</span> <span class="token punctuation">[</span>frictionlessdata.datapackage <span class="token operator">:as</span> dp<span class="token punctuation">]</span>
            <span class="token punctuation">[</span>frictionlessdata.tableschema <span class="token operator">:as</span> ts<span class="token punctuation">]</span>
            <span class="token punctuation">[</span>clojure.spec.alpha <span class="token operator">:as</span> s<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token punctuation">(</span>s/<span class="token keyword">def</span> <span class="token operator">::number</span> int?<span class="token punctuation">)</span>
<span class="token punctuation">(</span>s/<span class="token keyword">def</span> <span class="token operator">::symbol</span> <span class="token keyword">string?</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span>s/<span class="token keyword">def</span> <span class="token operator">::name</span> <span class="token keyword">string?</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span>s/<span class="token keyword">def</span> <span class="token operator">::mass</span> float?<span class="token punctuation">)</span>
<span class="token punctuation">(</span>s/<span class="token keyword">def</span> <span class="token operator">::metal</span> <span class="token keyword">string?</span><span class="token punctuation">)</span>

<span class="token punctuation">(</span>s/<span class="token keyword">def</span> <span class="token operator">::element</span> <span class="token punctuation">(</span>s/<span class="token keyword">keys</span> <span class="token operator">:req</span> <span class="token punctuation">[</span><span class="token operator">::number</span> <span class="token operator">::symbol</span> <span class="token operator">::name</span> <span class="token operator">::mass</span> <span class="token operator">::metal</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token punctuation">(</span><span class="token keyword">def</span> pkg
  <span class="token punctuation">(</span>dp/<span class="token keyword">load</span> <span class="token string">&quot;https://raw.githubusercontent.com/frictionlessdata/example-data-packages/62d47b454d95a95b6029214b9533de79401e953a/periodic-table/datapackage.json&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token punctuation">(</span><span class="token keyword">def</span> resources <span class="token punctuation">(</span>dp/get-resources pkg <span class="token operator">:data</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token punctuation">(</span><span class="token keyword">def</span> elements <span class="token punctuation">(</span>dp/<span class="token keyword">cast</span> resources element<span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token punctuation">(</span><span class="token keyword">defn</span> -main <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token punctuation">(</span><span class="token keyword">doseq</span> <span class="token punctuation">[</span><span class="token number">e</span> elements<span class="token punctuation">]</span>
    <span class="token punctuation">(</span><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">&lt;</span> <span class="token punctuation">(</span><span class="token operator">:mass</span> <span class="token number">e</span><span class="token punctuation">)</span> <span class="token number">10</span><span class="token punctuation">)</span>
      <span class="token punctuation">(</span><span class="token keyword">println</span> <span class="token number">e</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>When run, the program produces the following output:</p> <div class="language-sh extra-class"><pre class="language-sh"><code>$ lein run
<span class="token punctuation">{</span>::number <span class="token number">1</span> ::symbol <span class="token string">&quot;H&quot;</span> ::name <span class="token string">&quot;Hydrogen&quot;</span> ::mass <span class="token number">1.00794</span> ::metal <span class="token string">&quot;nonmetal&quot;</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span>::number <span class="token number">2</span> ::symbol <span class="token string">&quot;He&quot;</span> ::name <span class="token string">&quot;Helium&quot;</span> ::mass <span class="token number">4.002602</span> ::metal <span class="token string">&quot;noble gas&quot;</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span>::number <span class="token number">3</span> ::symbol <span class="token string">&quot;Li&quot;</span> ::name <span class="token string">&quot;Lithium&quot;</span> ::mass <span class="token number">6.941</span> ::metal <span class="token string">&quot;alkali gas&quot;</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span>::number <span class="token number">4</span> ::symbol <span class="token string">&quot;Be&quot;</span> ::name <span class="token string">&quot;Beryllium&quot;</span> ::mass <span class="token number">9.012182</span> ::metal <span class="token string">&quot;alkaline earth metal&quot;</span><span class="token punctuation">}</span>
</code></pre></div><p>This concludes our simple tutorial for using the Clojure libraries for Frictionless Data.</p> <p>We welcome your feedback and questions via our <a href="http://gitter.im/frictionlessdata/chat" target="_blank" rel="noopener noreferrer">Frictionless Data Gitter chat<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> or via <a href="https://github.com/frictionlessdata/datapackage-clj/issues" target="_blank" rel="noopener noreferrer">GitHub issues<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> on the <a href="https://github.com/frictionlessdata/datapackage-clj" target="_blank" rel="noopener noreferrer">datapackage-clj<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> repository.</p></div> <footer><a href="/blog/"> &lt; Go back</a></footer></div></main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.8683ac4c.js" defer></script><script src="/assets/js/6.6b553f36.js" defer></script><script src="/assets/js/2.d1974d30.js" defer></script><script src="/assets/js/60.ac4e3c13.js" defer></script>
  </body>
</html>
